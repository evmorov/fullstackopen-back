(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,n,t){"use strict";t.r(n);var r=t(1),c=t.n(r),o=t(14),a=t.n(o),i=t(3),u=t(0),s=function(e){var n=e.filterWord,t=e.onChange;return Object(u.jsxs)("div",{children:["filter shown with: ",Object(u.jsx)("input",{value:n,onChange:t})]})},d=function(e){var n=e.onSubmit,t=e.nameValue,r=e.numberValue,c=e.onNameChange,o=e.onNumberChange;return Object(u.jsxs)("form",{onSubmit:n,children:[Object(u.jsxs)("div",{children:["name: ",Object(u.jsx)("input",{value:t,onChange:c})]}),Object(u.jsxs)("div",{children:["phone: ",Object(u.jsx)("input",{value:r,onChange:o})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"add"})})]})},f=function(e){var n=e.person,t=n.id,r=n.name,c=n.number,o=e.onDeleteClick;return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:r}),Object(u.jsx)("td",{children:c}),Object(u.jsx)("td",{children:Object(u.jsx)("button",{onClick:o,children:"delete"})})]},t)},b=function(e){var n=e.persons,t=e.onPersonDelete;return Object(u.jsx)("table",{children:Object(u.jsx)("tbody",{children:n.map((function(e){return Object(u.jsx)(f,{person:e,onDeleteClick:function(){return t(e.id)}},e.id)}))})})},j=t(4),l=t.n(j),h="/api/persons",m={getAll:function(){return l.a.get(h).then((function(e){return e.data}))},create:function(e){return l.a.post(h,e).then((function(e){return e.data}))},update:function(e,n){return l.a.put("".concat(h,"/").concat(e),n).then((function(e){return e.data}))},destroy:function(e){return l.a.delete("".concat(h,"/").concat(e))}},p=function(e){var n=e.notification,t=n.message,r=n.type;if(!t)return null;var c={color:function(){var e="lightgrey";switch(r){case"info":e="green";break;case"error":e="red";break;default:console.error("Unkown notification type ".concat(r))}return e}(),background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"};return Object(u.jsx)("div",{style:c,children:t})},O=function(){var e=Object(r.useState)([]),n=Object(i.a)(e,2),t=n[0],c=n[1],o=Object(r.useState)(""),a=Object(i.a)(o,2),f=a[0],j=a[1],l=Object(r.useState)(""),h=Object(i.a)(l,2),O=h[0],x=h[1],v=Object(r.useState)(""),g=Object(i.a)(v,2),w=g[0],y=g[1],C=Object(r.useState)({}),k=Object(i.a)(C,2),S=k[0],D=k[1];Object(r.useEffect)((function(){m.getAll().then((function(e){c(e)}))}),[]);var N=function(e){D({message:e,type:"info"}),setTimeout((function(){return D({})}),3e3)},A=function(e){D({message:e,type:"error"}),setTimeout((function(){return D({})}),4e3)},V=function(e,n){var t="".concat(e.name," is already added to phonebook, replace the old number with a new one?");window.confirm(t)&&P(e.id,n).then((function(){N("Updated ".concat(e.name))})).catch((function(e){A(e.response.data.error)}))},P=function(e,n){return m.update(e,n).then((function(n){c(t.map((function(t){return t.id===e?n:t}))),j(""),x("")}))},B=t.filter((function(e){return e.name.toLowerCase().includes(w.toLowerCase())}));return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)(p,{notification:S}),Object(u.jsx)(s,{filterWord:w,onChange:function(e){y(e.target.value)}}),Object(u.jsx)("h3",{children:"Add a new"}),Object(u.jsx)(d,{onSubmit:function(e){if(e.preventDefault(),f){var n={name:f,number:O},r=t.find((function(e){return e.name===f}));r?V(r,n):m.create(n).then((function(e){c(t.concat(e)),j(""),x(""),N("Added ".concat(e.name))})).catch((function(e){A(e.response.data.error)}))}},nameValue:f,numberValue:O,onNameChange:function(e){j(e.target.value)},onNumberChange:function(e){x(e.target.value)}}),Object(u.jsx)("h3",{children:"Numbers"}),Object(u.jsx)(b,{persons:B,onPersonDelete:function(e){var n=t.find((function(n){return n.id===e}));if(window.confirm("Delete ".concat(n.name,"?")))return m.destroy(e).then((function(){c(t.filter((function(e){return e!==n}))),N("Deleted ".concat(n.name))})).catch((function(e){A("Information of ".concat(n.name," has already beed removed from server"))}))}})]})};a.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(O,{})}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.d2d00d90.chunk.js.map